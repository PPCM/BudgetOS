# Changelog - 2026-02-01

## Summary
Added language selector (FR/EN) on Login and Register pages for unauthenticated users with localStorage persistence. Added application bootstrap flow: automatic detection of first-time setup with redirect to registration page, setup-status API endpoint, removal of demo credentials. Added `test:global` and `db:reset` npm scripts. Created project-level CLAUDE.md with BudgetOS-specific instructions, cleaned global CLAUDE.md. Added CLAUDE.md git exclusion rule and versioned backup system. Created complete user documentation with 18 screenshots, attractive GitHub README, user guide, and admin guide. Created i18n infrastructure with i18next: configuration, error translation helper, locale-aware formatters hook, and complete French/English translation files. Migrated Layout, Toast, ImportReviewRow components, Accounts, Categories, Reports, Settings, Import, CreditCards, Payees, PlannedTransactions, Rules, and Transactions pages to use react-i18next translation keys. Migrated backend service files (importService, forecastService, reportService) from French to English error messages and display strings. Migrated backend middleware files (auth, validation, csrf, security) to English error messages with proper error codes. Migrated all backend model files (User, Account, Category, Transaction, Payee, Rule, CreditCard, PlannedTransaction, Group) from French to English error messages with proper error codes. Migrated all 11 backend validator files from French to English Zod validation messages and JSDoc comments. Migrated all 8 backend controller files from French to English error messages with proper error codes and translated French comments to English. Added default locale (FR/EN) setting at application level (system_settings) and group level (groups.default_locale column): migration, backend model/controller/validator support, frontend selectors in AdminSettings/AdminGroups/AdminUsers pages, locale inheritance for inline user creation.

## Changes

- [data/budgetos.db] Deleted database to start fresh
- [src/controllers/authController.js] Added `getSetupStatus` handler returning `needsSetup` flag based on user count; migrated all French error messages to English with error codes: REGISTRATION_DISABLED, INVALID_CREDENTIALS, ACCOUNT_SUSPENDED, USER_NOT_FOUND; translated success messages ('Logged out successfully', 'Password changed successfully')
- [src/controllers/adminController.js] Migrated all French error messages to English with error codes: USER_NOT_FOUND, CANNOT_MODIFY_OWN_ROLE, CANNOT_SUSPEND_SELF, DEFAULT_GROUP_REQUIRED, DEFAULT_GROUP_INVALID, GROUP_INVALID
- [src/controllers/importController.js] Migrated all French error messages to English with error codes: FILE_REQUIRED, ACCOUNT_ID_REQUIRED, FILE_TYPE_REQUIRED, IMPORT_ID_REQUIRED, ACTIONS_REQUIRED, IMPORT_NOT_FOUND
- [src/controllers/payeeController.js] Migrated French error messages to English with error code PAYEE_NAME_EXISTS; translated French comments to English
- [src/controllers/groupController.js] Migrated French error message to English with error code MEMBER_ID_REQUIRED; translated success message 'Member removed from group'
- [src/controllers/ruleController.js] Translated success message 'Rule applied'
- [src/controllers/accountController.js] Translated success message 'Balances recalculated'
- [src/controllers/uploadController.js] Migrated all French error messages to English with error codes: UNSUPPORTED_FORMAT, FILE_REQUIRED, INVALID_IMAGE_URL; translated all French comments to English
- [src/routes/auth.js] Added public `GET /setup-status` route
- [client/src/lib/api.js] Added `authApi.getSetupStatus` method
- [client/src/contexts/AuthContext.jsx] Added `needsSetup` state, detect setup mode when auth check fails, reset after register/login
- [client/src/App.jsx] Updated `PrivateRoute` to redirect to `/register` when `needsSetup`, added `LoginRoute` component that redirects to `/register` in setup mode
- [client/src/pages/Register.jsx] Conditional display: setup mode shows "Bienvenue sur BudgetOS" title and hides "Déjà un compte" link; migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, form labels, placeholders, submit button, password mismatch, login link), replaced manual error extraction with translateError(); added LanguageSelector component in gradient container with relative positioning
- [client/src/pages/Login.jsx] Removed hardcoded demo credentials block; migrated to react-i18next: replaced all hardcoded French strings with t() calls (subtitle, email label/placeholder, password label, submit button, no account/create account link, CSRF error, login error), replaced manual error extraction with translateError(); added LanguageSelector component in gradient container with relative positioning
- [client/src/pages/Dashboard.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, stat card titles, section headers, empty states, uncategorized label, vs last month with interpolation, noData), replaced formatCurrency/formatDateRelative from utils with useFormatters hook
- [tests/integration/auth.test.js] Added "Setup Status" tests (needsSetup true/false, public access) and "Bootstrap Flow" test (full cycle)
- [package.json] Added `test:global` script (runs all tests on 3 DBs then resets SQLite) and `db:reset` script
- [CLAUDE.md] Created project-level instructions: tech stack, database setup, testing commands, Docker containers, Chrome MCP UI testing, server management
- [.gitignore] Added `CLAUDE.md` and `CLAUDE.local.md` to git exclusion
- [~/.claude/CLAUDE.md] Cleaned global instructions, added CLAUDE.md git exclusion rule and detailed versioned backup methodology with `history/` directory and dated snapshots
- [README.md] Replaced with attractive GitHub README: centered header with badges, grouped features, screenshot gallery, quick start, database support table, tech stack table, documentation links, testing and server management sections
- [doc/user-guide.md] Created complete user guide (12 sections): getting started, dashboard, accounts, transactions, credit cards, bank import, recurring transactions, rules, categories, payees, reports, settings — all with embedded screenshots
- [doc/admin-guide.md] Created complete admin guide (12 sections): requirements, installation, configuration (.env reference), database setup (SQLite/PostgreSQL/MariaDB with Docker), bootstrap, user management, group management, system settings, CLI reference, testing, security, backup & restore
- [doc/images/*.png] Added 18 screenshots: login, dashboard, accounts, transactions, credit-cards, categories, payees, import, planned, rules, reports-trend, reports-categories, reports-forecast, settings, admin-users, admin-groups, admin-settings, setup-welcome
- [client/src/components/LanguageSelector.jsx] New component: FR | EN toggle with localStorage persistence ('budgetos-lang'), positioned absolute top-right with white text styling (bold/opaque for active, semi-transparent for inactive)
- [client/src/i18n.js] Created i18next configuration with French/English resources, default language French, fallback French, no HTML escaping; reads localStorage('budgetos-lang') on initialization to restore saved language preference
- [client/src/lib/errorHelper.js] Created `translateError()` helper to translate backend error codes and validation details via i18n
- [client/src/hooks/useFormatters.js] Created `useFormatters()` hook providing locale-aware `formatCurrency`, `formatDate`, `formatDateRelative` functions
- [client/src/locales/fr.json] Created complete French translation file (585 keys) covering all application sections; restructured key paths to match frontend code usage: flattened form/step sub-namespaces (accounts.form.*, creditCards.form.*, transactions.form.*, planned.form.*, rules.form.*, import.step1/2/3.*) into flat keys, renamed auth keys (securityError→csrfError, loginError→error, setupTitle→welcomeTitle, signIn→login), added missing keys (common.active/inactive/noData/ok/remove/select/vsLastMonth, dashboard.noTransactions, categories.newCategoryTitle/noCategories/importDone, creditCards flat form keys, payees flat form keys, transactions flat form/toast/filter keys, import flat step/review keys, rules flat form/empty keys, reports.forecast.in30days case fix, settings.*.saved)
- [client/src/locales/en.json] Restructured English translation file to mirror fr.json key structure (585 keys, 100% parity)
- [client/src/components/Layout.jsx] Migrated to react-i18next: navigation items use translation keys (nav.*), admin navigation uses admin.*.title keys, "Administration" label and "Déconnexion" title replaced with t() calls
- [client/src/components/Toast.jsx] Migrated default error title to use i18n.t('common.error') instead of hardcoded 'Erreur'
- [client/src/components/ImportReviewRow.jsx] Migrated to react-i18next: match type badges, action button titles, candidate list labels, matched transaction detail labels, payee placeholder, purchase date, cancel button all use t() calls
- [client/src/pages/Accounts.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, labels, form fields, button texts, confirm dialog), moved accountTypes config inside components for t() access, replaced formatCurrency from utils with useFormatters hook, replaced error alerts with translateError()
- [client/src/pages/Categories.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, labels, type config, form fields, button texts, confirm dialog, import/export messages), extracted typeConfig into getTypeConfig(t) function, replaced error alerts with translateError()
- [client/src/pages/Reports.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, tab labels, chart titles, legend labels, forecast labels), replaced formatCurrency from utils with useFormatters hook, replaced toLocaleDateString('fr-FR') with locale-aware Intl.DateTimeFormat using useFormatters locale
- [client/src/pages/Settings.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, tab labels, profile/security/preferences section titles and labels, success/error messages, form options for languages/currencies/weekDays), replaced hardcoded error fallback with translateError(), button text uses t('common.save')
- [client/src/pages/Import.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, step labels, form labels, delimiter/date format/decimal separator options, column labels, button texts, summary cards, filter tabs, table headers, result section, error messages), replaced raw error message extraction with translateError(), removed unused formatCurrency import
- [client/src/pages/CreditCards.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, form labels, debit type buttons, filter/sort controls, empty states, card detail info, cycle display, confirm delete), replaced formatCurrency/formatDate from utils with useFormatters hook, replaced error alerts with translateError()
- [client/src/pages/Payees.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, form labels, search placeholder, empty state, delete modal with transaction handling, button texts, confirm delete), replaced error alerts with translateError()
- [client/src/pages/PlannedTransactions.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, modal title, type labels, form labels, frequency options, account labels, date labels, checkbox labels, confirm delete, error/loading messages, empty states), moved frequencies array inside components for t() access, replaced formatCurrency/formatDate from utils with useFormatters hook, replaced error alerts with translateError()
- [client/src/pages/Rules.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, modal title, rule name, conditions, operators, fields, condition logic, category assignment, active rule checkbox, empty state, condition count), moved operators and fields arrays inside component for t() access, replaced hardcoded button labels with t('common.*') calls

- [client/src/pages/Transactions.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, operation count, modal title, type labels, form labels, payment method, card/check buttons, account selects for transfers and non-transfers, category/payee searchable selects, reconciliation button and tooltips, filter dropdowns for accounts/categories/types/statuses, date period filters, table headers, confirm delete, success/error toasts), replaced formatCurrency/formatDate from utils with useFormatters hook, replaced error alerts with translateError()
- [src/services/importService.js] Migrated all French error messages to English: 'Import non trouvé' → 'Import not found', 'Import pas encore analysé ou déjà confirmé' → 'Import not yet analyzed or already confirmed', 'Résultats d'analyse corrompus' → 'Corrupted analysis results', 'Type de fichier non supporté' → 'Unsupported file type'
- [src/services/forecastService.js] Translated French string 'Prélèvement' → 'Debit' in deferred debit description
- [src/services/reportService.js] Translated French fallback label 'Non catégorisé' → 'Uncategorized' in both getExpensesByCategory and getIncomeByCategory methods
- [src/validators/auth.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English; replaced .min(8)+.regex() with single .refine() on password fields (registerSchema, changePasswordSchema) to avoid duplicate error messages
- [src/validators/accounts.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English
- [src/validators/categories.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English
- [src/validators/creditCards.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English
- [src/validators/transactions.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English
- [src/validators/admin.js] Migrated remaining French Zod validation messages to English; replaced .min(8)+.regex() with single .refine() on createUserSchema password field to avoid duplicate error messages
- [src/validators/group.js] Migrated all Zod validation messages from French to English; replaced .min(8)+.regex() with single .refine() on addMemberSchema password field to avoid duplicate error messages
- [src/validators/plannedTransactions.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English
- [src/validators/payees.js] Migrated Zod validation message from French to English
- [src/validators/rules.js] Migrated all Zod validation messages from French to English and translated JSDoc comments to English
- [src/validators/import.js] Migrated Zod validation messages from French to English
- [src/middleware/auth.js] Migrated all French error messages to English with error codes: 'Authentification requise' → 'Authentication required' (AUTH_REQUIRED), 'Accès administrateur requis' → 'Admin access required' (ADMIN_REQUIRED), 'Accès super administrateur requis' → 'Super admin access required' (SUPER_ADMIN_REQUIRED), 'Accès administrateur de groupe requis' → 'Group admin access required' (GROUP_ADMIN_REQUIRED), 'Accès non autorisé à cette ressource' → 'Unauthorized access to this resource' (FORBIDDEN)
- [src/middleware/validation.js] Migrated error message and French comments to English: 'Données de requête invalides' → 'Invalid request data' (VALIDATION_ERROR), translated all JSDoc and inline comments
- [src/middleware/csrf.js] Migrated error message and French comments to English: 'Token CSRF invalide' → 'Invalid CSRF token' (CSRF_TOKEN_INVALID), translated all JSDoc and inline comments
- [src/middleware/security.js] Migrated all French rate limiter messages and comments to English: 'Trop de requêtes...' → 'Too many requests...', 'Trop de tentatives de connexion...' → 'Too many login attempts...', 'Trop de fichiers uploadés...' → 'Too many file uploads...', translated all JSDoc and inline comments
- [tests/utils/errors.test.js] Updated all default message assertions to match migrated English defaults in errors.js: BadRequestError, UnauthorizedError, ForbiddenError, ConflictError, ValidationError, TooManyRequestsError, InternalError, DatabaseError
- [tests/models/Group.test.js] Updated assertion for duplicate membership error message from French to English
- [src/models/User.js] Migrated all French error messages to English with error codes: 'Cet email est déjà utilisé' → 'This email is already in use' (EMAIL_EXISTS), 'Utilisateur non trouvé' → 'User not found' (USER_NOT_FOUND)
- [src/models/Account.js] Migrated French error message to English with error code: 'Compte non trouvé' → 'Account not found' (ACCOUNT_NOT_FOUND)
- [src/models/Category.js] Migrated French error message to English with error code: 'Catégorie non trouvée' → 'Category not found' (CATEGORY_NOT_FOUND)
- [src/models/Transaction.js] Migrated French error message to English with error code: 'Transaction non trouvée' → 'Transaction not found' (TRANSACTION_NOT_FOUND)
- [src/models/Payee.js] Migrated French error message to English with error code: 'Tiers non trouvé' → 'Payee not found' (PAYEE_NOT_FOUND)
- [src/models/Rule.js] Migrated French error message to English with error code: 'Règle non trouvée' → 'Rule not found' (RULE_NOT_FOUND)
- [src/models/CreditCard.js] Migrated French error message to English with error code: 'Carte de crédit non trouvée' → 'Credit card not found' (CREDIT_CARD_NOT_FOUND)
- [src/models/PlannedTransaction.js] Migrated French error message to English with error code: 'Transaction planifiée non trouvée' → 'Planned transaction not found' (PLANNED_NOT_FOUND)
- [src/models/Group.js] Migrated all French error messages to English with error codes: 'Groupe non trouvé' → 'Group not found' (GROUP_NOT_FOUND), 'Cet utilisateur est déjà membre de ce groupe' → 'This user is already a member of this group' (MEMBER_EXISTS), 'Un utilisateur ne peut être membre que d'un seul groupe' → 'A user can only be a member of one group' (SINGLE_GROUP_MEMBERSHIP), 'Membre non trouvé dans ce groupe' → 'Member not found in this group' (MEMBER_NOT_FOUND)
- [tests/utils/errors.test.js] Updated default NotFoundError message assertion from French to English ('Resource not found')
- [tests/models/Account.test.js] Updated French error message assertions to English ('Account not found')
- [tests/models/Transaction.test.js] Updated French error message assertions to English ('Transaction not found')
- [tests/models/PlannedTransaction.test.js] Updated French error message assertions to English ('Planned transaction not found')
- [tests/models/Group.test.js] Updated all French error message assertions to English ('Group not found', 'This user is already a member of this group', 'Member not found in this group')
- [client/src/pages/AdminUsers.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, modal titles, form labels, role/status badges, table headers, filter options, toast messages, confirm dialogs, action buttons), moved roleBadges/statusBadges inside components for t() access, replaced formatDate from utils with useFormatters hook, replaced error alerts with translateError()
- [client/src/pages/AdminGroups.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, modal titles, form labels, member count, show/hide members, member management, toast messages, confirm dialogs, status labels), replaced error alerts with translateError()
- [client/src/pages/AdminSettings.jsx] Migrated to react-i18next: replaced all hardcoded French strings with t() calls (title, subtitle, section headers, toggle label and description, default group label and description, save/saving button text, toast messages), replaced error alerts with translateError()
- [client/src/locales/fr.json] Restructured admin section keys to flat format matching components (removed nested toasts/empty objects, added form sub-object with firstName/lastName/email/password/role/language/currency/group/groups/french/english); added ~45 Zod validation message translation keys in "validation" section mapping exact backend messages to French translations (auth, accounts, categories, transactions, creditCards, payees, group, rules, plannedTransactions, import, admin validators)
- [client/src/locales/en.json] Restructured admin section keys to match fr.json flat format (unified key paths for all admin.users, admin.groups, admin.settings keys); added ~45 Zod validation message translation keys in "validation" section mirroring fr.json keys with English values (identity mapping for English locale)

- [client/tests/components/LanguageSelector.test.jsx] New test file: 7 unit tests covering rendering (FR/EN buttons, separator), language switching (changeLanguage calls), localStorage persistence, and active/inactive styling (bold/opaque vs semi-transparent)
- [tests/ui/i18n/language-switch.ui.test.js] Created UI test documenting language switch verification via Chrome MCP: setup flow in French, dashboard translations, preferences language selector, switch to English (full UI verification), switch back to French, persistence after page reload
- [client/tests/pages/AdminGroups.test.jsx] Replaced all hardcoded French translated text in assertions with i18n keys: page title/subtitle, button labels (new group, edit, delete, cancel, create, add, remove), member counts (all use 'admin.groups.memberCount'), status badges (common.active/inactive), empty states, toggle buttons (showMembers/hideMembers), modal titles and form labels, confirm dialog title attributes, add member modal labels (selectUser, groupRole, addMember)
- [client/tests/pages/AdminUsers.test.jsx] Replaced all hardcoded French translated text in assertions with i18n keys: page title/subtitle (admin.users.title/subtitle), new user/edit user modal titles (admin.users.newUser/editUser), form labels (admin.users.form.firstName/lastName/email/password/role/language/currency/group/groups), role badges (admin.users.roles.super_admin/admin/user), status badges (admin.users.statuses.active/suspended), table headers (admin.users.tableHeaders.name/email/role/status/actions), filter controls (admin.users.searchPlaceholder/allRoles/allStatuses), action buttons (admin.users.suspend/reactivate, common.edit/cancel/create/save/ok), group management (admin.users.noGroup/chooseGroup/addGroup/removeFromGroup), empty state (admin.users.noUsers)

- [src/database/migrations/018_add_default_locale.js] New migration: adds `default_locale` column (string, 10, default 'fr') to `groups` table and inserts `default_locale` key with value 'fr' into `system_settings`
- [src/models/SystemSetting.js] Added `defaultLocale: settings.default_locale || 'fr'` to `getAllFormatted()` return object
- [src/models/Group.js] Updated `create()` to accept and insert `defaultLocale` → `default_locale`; updated `update()` to handle `data.defaultLocale` → `default_locale`; updated `format()` to include `defaultLocale: group.default_locale || 'fr'`
- [src/controllers/adminController.js] Added `defaultLocale` extraction in `updateSettings()` and `SystemSetting.set('default_locale', value)` call
- [src/controllers/groupController.js] Pass `defaultLocale: req.body.defaultLocale` in `createGroup()`; in `addMember()`, capture group object and pass `locale: group.defaultLocale` when creating inline users
- [src/validators/admin.js] Added `defaultLocale: z.enum(['fr', 'en']).optional()` to `updateSettingsSchema`
- [src/validators/group.js] Added `defaultLocale: z.enum(['fr', 'en']).optional()` to `createGroupSchema` and `updateGroupSchema`
- [client/src/pages/AdminSettings.jsx] Added `defaultLocale` to formData state and useEffect sync; added language selector dropdown (FR/EN) after default group section; sends `defaultLocale` in save payload
- [client/src/pages/AdminGroups.jsx] GroupModal now accepts `appDefaultLocale` prop and includes `defaultLocale` field (dropdown FR/EN); parent fetches `admin-settings` query and passes `appDefaultLocale` to GroupModal
- [client/src/pages/AdminUsers.jsx] UserModal now accepts `appDefaultLocale` prop, uses it for locale initialization; parent fetches `admin-settings` query and passes `appDefaultLocale` to both create and edit UserModal instances
- [client/src/locales/fr.json] Added keys: `admin.settings.defaultLocale`, `admin.settings.defaultLocaleDesc`, `admin.groups.defaultLocale`, `admin.groups.defaultLocaleDesc`
- [client/src/locales/en.json] Added keys: `admin.settings.defaultLocale`, `admin.settings.defaultLocaleDesc`, `admin.groups.defaultLocale`, `admin.groups.defaultLocaleDesc`
- [client/tests/pages/AdminSettings.test.jsx] Added `errorHelper` mock to prevent i18n init; added `defaultLocale: 'fr'` to mockSettings; replaced French text assertions with i18n key assertions
- [client/tests/pages/AdminGroups.test.jsx] Added `errorHelper` mock to prevent i18n init; added `adminApi.getSettings` mock; replaced French text assertions with i18n key assertions
- [client/tests/pages/AdminUsers.test.jsx] Added `errorHelper` mock (with proper `response.data.error.message` extraction) and `useFormatters` mock to prevent AuthProvider dependency; added `adminApi.getSettings` mock; replaced French text assertions with i18n key assertions

- [client/src/contexts/AuthContext.jsx] Added `userGroups` state populated from `/auth/me` groups response; added computed `isGroupAdmin` (true if user is admin in any group); simplified `login()` and `register()` to call `checkAuth()` after auth success (avoids duplication, loads settings and groups in one call); exposed `userGroups` and `isGroupAdmin` in Provider value
- [client/src/App.jsx] Added `GroupAdminRoute` component that grants access to `super_admin` OR `isGroupAdmin` users; replaced `AdminRoute` with `GroupAdminRoute` on `/admin/groups` route
- [client/src/components/Layout.jsx] Updated admin navigation section to show for `super_admin` OR `isGroupAdmin`; group admins only see "Groupes" link (Users and Settings links filtered out)
- [client/src/pages/AdminGroups.jsx] Added role-based UI: imported `useAuth`, computed `isSuperAdmin`; conditionally disabled `admin-users-all` and `admin-settings` queries for non-super_admin (enabled: isSuperAdmin); hid "Nouveau groupe" button, edit/delete buttons on group cards for group admins; refactored `AddMemberModal` to support two modes: super_admin sees tab UI (existing user dropdown + inline creation), group admin sees only inline creation form — prevents user enumeration; inline creation form mirrors AdminUsers layout (firstName/lastName → email → password → language/currency → group role), reuses `admin.users.form.*` translation keys; propagated `isSuperAdmin` prop through GroupCard and AddMemberModal
- [src/validators/group.js] Added `locale` (enum fr/en) and `currency` (enum EUR/USD/GBP/CHF) optional fields to `addMemberSchema`
- [src/controllers/groupController.js] Updated `addMember` to extract and pass `locale` and `currency` from request body to `User.createByAdmin`; locale falls back to `group.defaultLocale` if not provided
- [client/src/locales/fr.json] Added 2 keys: `admin.groups.existingUser`, `admin.groups.newMember`
- [client/src/locales/en.json] Added 2 keys: `admin.groups.existingUser`, `admin.groups.newMember`
- [client/tests/pages/AdminGroups.test.jsx] Added `useAuth` mock (defaults to super_admin, reset in beforeEach); added 3 tests for super_admin AddMemberModal (existing user tab, inline creation tab with locale/currency, form submission); added 5 tests for group admin scenario (hides new group button, hides edit/delete buttons, shows groups and members, inline-only add member modal without tabs with all fields verified, inline creation API call with locale/currency); updated member removal tests to check `common.delete` title instead of `common.remove`

- [src/models/User.js] Added `delete(id)` static method that permanently deletes a user and all cascade-dependent data (accounts, transactions, categories, etc.)
- [src/controllers/adminController.js] Added `deleteUser` handler with protections: cannot delete self (CANNOT_DELETE_SELF), cannot delete last super_admin (CANNOT_DELETE_LAST_SUPER_ADMIN); logs deletion
- [src/routes/admin.js] Added `DELETE /users/:userId` route with `requireSuperAdmin` middleware
- [src/controllers/groupController.js] Changed `removeMember` to permanently delete the user (via `User.delete`) instead of just removing group membership; added protections: cannot delete self, cannot delete last super_admin
- [client/src/lib/api.js] Added `adminApi.deleteUser(id)` method
- [client/src/pages/AdminUsers.jsx] Replaced suspend/reactivate buttons with a single delete button (Trash2 icon only, no text); edit button changed to icon only (Pencil, no text); replaced `suspendMutation`/`reactivateMutation` with `deleteMutation` calling `adminApi.deleteUser`; removed unused `UserCheck`/`UserX` icon imports
- [client/src/pages/AdminGroups.jsx] Renamed `removeMemberMutation` to `deleteMemberMutation`; changed member action button from UserMinus to Trash2 icon with `common.delete` title; updated confirm dialog key to `admin.groups.confirmDeleteMember`; removed unused `UserMinus` icon import
- [client/src/locales/fr.json] Added keys: `admin.users.confirmDelete`, `admin.users.deleted`, `admin.groups.memberDeleted`, `admin.groups.confirmDeleteMember`, `errors.CANNOT_DELETE_SELF`
- [client/src/locales/en.json] Added keys: `admin.users.confirmDelete`, `admin.users.deleted`, `admin.groups.memberDeleted`, `admin.groups.confirmDeleteMember`, `errors.CANNOT_DELETE_SELF`
- [client/tests/pages/AdminUsers.test.jsx] Replaced suspend/reactivate tests with delete user tests; changed `getAllByText('common.edit')` to `getAllByTitle('common.edit')` throughout (icon-only buttons); added `deleteUser` to API mock; updated error handling tests for delete
- [client/tests/pages/AdminGroups.test.jsx] Updated member delete button tests to use `getAllByTitle('common.delete')` with correct count (3 group + 2 member = 5)
- [tests/integration/admin.test.js] Added 6 integration tests for DELETE /admin/users/:userId: successful deletion (verifies user removed from DB), deletion preserves group (verifies group and membership cleanup), self-deletion prevention (400 CANNOT_DELETE_SELF), last super_admin protection, admin role rejection (403), regular user rejection (403)
- [tests/integration/groups.test.js] Updated "should remove a member" to verify user is actually deleted from DB and group still exists; added self-deletion prevention via removeMember test (400 CANNOT_DELETE_SELF); added last super_admin deletion prevention via removeMember test
- [tests/ui/admin/user-deletion.ui.test.js] New UI test file documenting Chrome MCP verification of user deletion: super admin deletes user from AdminUsers (icon-only buttons, confirm dialog, toast, user disappears), group admin deletes member from AdminGroups (restricted UI, Trash2 icon, confirm dialog, toast, member removed, group preserved)

## Notes
- The first user registered automatically gets the `super_admin` role (existing logic in authController).
- Integration tests pass on all 3 databases: SQLite (162 passed), MariaDB (162 passed), PostgreSQL (162 passed).
- After locale restructuring: unit tests 300/300 passed, integration tests 162/162 passed, frontend build OK.
- UI test via Chrome MCP: language switch FR↔EN works correctly with full interface translation and persistence after reload.
- CLAUDE.md backup stored at `~/claude-projet/BudgetOS/CLAUDE.md`.
- Default locale feature: backend 300/300 tests pass, client 250/250 tests pass, Vite build OK.
- Group admin access: no backend changes needed (existing `requireGroupAdmin` middleware already handles it); client tests 256/256 pass, Vite build OK.
- User deletion: DB CASCADE constraints handle all dependent data (accounts, transactions, categories, etc.); groups are NOT deleted (only group_members entry is removed). Backend 300/300 tests pass, client 253/253 tests pass, Vite build OK. Integration tests for deleteUser: 6 admin + 3 groups = 9 new tests added, all passing. UI tests verified via Chrome MCP (super admin + group admin flows).
